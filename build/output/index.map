{"version":3,"sources":["node_modules/is-url/index.js","assets/scripts/index.js"],"names":["window","i","newPage","option","page","$","attr","outerHeight","src","replaceElement","oldElement","newElement","parent","parentElement","insertBefore","supportIframeHeight","resetIframeHeight","onresize","each","index","element","height","perHeight","match","per","parseInt","css","formatURL","val","hasPrefix","validateURL","undefined","sendFeedback","validbool","feedback","nodeType","bool","Boolean","inputClass","feedbackClass","place","find","addClass","insertAfter","removeClass","text","validFeedback","invalidFeedback","entranceSumit","entrance","hasClass","input","url","html","bindEntranceInput","on","event","keyCode","submit","bindEntranceSubmit","button","bindEntrance","document","ready","querySelector"],"mappings":"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","file":"index.map","sourcesContent":["\n/**\n * Expose `isUrl`.\n */\n\nmodule.exports = isUrl;\n\n/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nvar protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\n\nvar localhostDomainRE = /^localhost[\\:?\\d]*(?:[^\\:?\\d]\\S*)?$/\nvar nonLocalhostDomainRE = /^[^\\s\\.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isUrl(string){\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  var match = string.match(protocolAndDomainRE);\n  if (!match) {\n    return false;\n  }\n\n  var everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  if (localhostDomainRE.test(everythingAfterProtocol) ||\n      nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n    return true;\n  }\n\n  return false;\n}\n","'use strict'\nimport isUri from \"is-url\"\n\nwindow.i = 0 //计数器\n\nconst newPage = (option) => {\n  let page = $(\"<iframe></iframe>\")\n    .attr(\"height\", window.outerHeight)\n    .attr(\"src\", (option.src || \"\"))\n  return page\n}\n\nconst replaceElement = (oldElement, newElement) => {\n  if(!(oldElement && newElement)) {return false}\n  let parent = oldElement.parentElement\n  if(!parent) {return false}\n  $(newElement).insertBefore($(oldElement))\n}\n\nconst supportIframeHeight = () => {\n  resetIframeHeight()\n  window.onresize = ()=>{\n    resetIframeHeight()\n  }\n}\n\nwindow.resetIframeHeight = () => {\n  $(\"iframe\").each((index, element) => {\n    if (!element) {return }\n    let height = $(element).attr(\"height\") || ''\n    let perHeight = height.match(/\\d+%$/)\n    if (!perHeight) {return }\n    let per = parseInt(perHeight)\n    height = $(element).parent().height() * per / 100\n    $(element).css(\"height\", height+\"px\")\n  })\n}\n\nconst formatURL = (val) => {\n  if ((!val) || (typeof val != \"string\") ) {return false}\n  let hasPrefix = val.match(/^http[s]?:[/]{2}/)\n  if(!hasPrefix){\n    val = \"http://\" + val\n  }\n  return val\n}\n\n\nconst validateURL = (val) => {\n  if (!isUri) throw \"isUri 未能成功加载\"\n  return (isUri(val) ? val : undefined)\n}\n\nconst sendFeedback = (element, validbool, feedback) => {\n  if ((!element) || (element.nodeType != 1)) {return false}\n  if ((!feedback) || (typeof feedback != \"string\")) {return false}\n  let bool = Boolean(validbool)\n  let inputClass = (bool) ? \"is-valid\" : \"is-invalid\"\n  let feedbackClass = (bool) ? \"valid-tooltip\" : \"invalid-tooltip\"\n  let place = $(element).parent().find(\".feedback\")[0]\n  if (!place) {\n    place = $(\"<div></div>\").addClass(\"feedback\").insertAfter(element)\n  }\n  $(element).removeClass(\"is-valid is-invalid\").addClass(inputClass)\n  $(place).text(feedback).removeClass(\"valid-tooltip invalid-tooltip\").addClass(feedbackClass)\n}\n\nconst validFeedback = (element, feedback) => {\n  sendFeedback(element, true, feedback)\n}\n\nconst invalidFeedback = (element, feedback) => {\n  sendFeedback(element, false, feedback)\n}\n\nconst entranceSumit = (entrance) => {\n  if (!(entrance && $(entrance).hasClass(\"entrance\"))) {return false}\n  let input = $(entrance).find(\"input[type=text]\")[0]\n  if (!input) {return false} \n  let val = $(input).val()\n  if (!val) {\n    invalidFeedback(input, \"请输入网址或搜索关键词\")\n    return \n  }\n  let url = validateURL(formatURL(val)) || (\"https://www.baidu.com/s?ie=UTF-8&wd=\" + val)\n\n  let page = $(\"<iframe></iframe>\")\n    .attr(\"src\", url)\n    .attr(\"onload\", \"resetIframeHeight()\")\n    .attr(\"width\", \"100%\")\n    .attr(\"height\", \"100%\")\n    .addClass(\"page\")\n  $(entrance).html(\"\").removeClass(\"entrance\").addClass(\"stage\").html(page)\n}\n\n\nconst bindEntranceInput = (entrance) => {\n  if (!(entrance && $(entrance).hasClass(\"entrance\"))) {return false}\n  let input = $(entrance).find(\"input[type=text]\")[0]\n  if (!input) {return }\n  $(input).on(\"keypress\", (event) => {\n    if (event.keyCode == 13) {\n      entrance.submit()\n    }\n  })\n}\n\n\nconst bindEntranceSubmit = (entrance) => {\n  if (!(entrance && $(entrance).hasClass(\"entrance\"))) {return false}\n  entrance.submit = () => {\n    entranceSumit(entrance)\n  }\n\n  let button = $(entrance).find(\"button\")[0]\n  if (!button) {return }\n  //提交按钮\n  $(button).on(\"click\", () => { entrance.submit() })\n}\n\n\n\nconst bindEntrance = () => {\n  $(\".entrance\").each((index, entrance)=>{\n    if(!entrance) {return }\n    window.i+=1\n    $(entrance).attr(\"id\", \"entrance-\"+window.i)\n    bindEntranceSubmit(entrance)\n    bindEntranceInput(entrance)\n  })  \n}\n\n\n$(document).ready(() => {\n  if (!document.querySelector) {return false}\n  supportIframeHeight()\n  bindEntrance()\n})\n\n//todo \n// 左右视窗比率调整\n// 移动端改为上下分屏\n// 输入框快捷方式\n// 前进后退 历史记录\n// 提供一个输入框随时修改网址\n// 把验证单独拿出来\n"]}